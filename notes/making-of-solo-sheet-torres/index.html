<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Making of Solo Sheet Torres - suXin space</title>
    <meta name="og:title" content="Making of Solo Sheet Torres - suXin space"/>
    <meta name="og:description" content="I've put the most evil character of Ace Combat series into Morgan. The work includes abusing Cheat Engine and direct recording of voicelines."/>
    <meta name="og:url" content="https://suxin.space/notes/making-of-solo-sheet-torres"/>
    <meta name="og:image" content="https://suxin.space/notes/making-of-solo-sheet-torres/Matias_Torres_AC7_Image.jpg"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:title" content="Making of Solo Sheet Torres - suXin space"/>
    <meta name="twitter:description" content="I've put the most evil character of Ace Combat series into Morgan. The work includes abusing Cheat Engine and direct recording of voicelines."/>
    <meta name="twitter:site" content="@suxinjke"/>
    <meta name="twitter:image" content="https://suxin.space/notes/making-of-solo-sheet-torres/Matias_Torres_AC7_Image.jpg"/>
    <link rel="stylesheet" href="/normalize.min.css">
    <link rel="stylesheet" href="/fonts/fonts.css">
    <link rel="stylesheet" href="/main.css?t=1693924001727">
    <link rel="stylesheet" href="/notes/note.css?t=1693924001727">
    <script src="/main.js?t=1693924001727" defer=""></script>
  </head>
  <body>
    <header class="header"><nav class="nav header__nav"><a href="/" class="nav__link"><div class="header-text"><div class="header-text__icon-container"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"/></svg></div><div class="header-text__content" title="Home"><h2 class="header-text__primary uppercase">Home</h2></div></div></a><a href="/notes/" class="nav__link active expand"><div class="header-text"><div class="header-text__icon-container"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"/></svg></div><div class="header-text__content" title="Notes - Making of Solo Sheet Torres"><h3 class="header-text__secondary">Making of Solo Sheet Torres</h3><h2 class="header-text__primary uppercase">Notes</h2></div></div></a></nav><h2 class="header__logo">suXin space</h2></header><main class="readable note"><h1><strong>Making of Solo Sheet Torres</strong></h1><h3 class="uppercase">Nov 04 2019</h3><div class="note__content"><p><strong>Disclaimer</strong>: spoilers to <strong>Ace Combat Zero</strong> and <strong>Ace Combat 7 DLC</strong> are to be expected because the <a href="https://www.youtube.com/watch?v=l4ORTB0yEUU">whole shitpost</a> is based around these.</p>
<h2 id="inspiration"><strong>Inspiration</strong><a href="#inspiration" class="anchor-link"><span>¶</span></a></h2><p>It&#39;s just this this old video of Donkey and Shrek fighting</p>
<iframe width="768" height="432" src="https://www.youtube.com/embed/rYFfNoBvusQ" title="Ace Combat Shrek" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p><em><strong>Don&#39;t you see?</strong></em> Anyone playing the <strong>Ace Combat 7 DLC missions</strong> will appreciate <em>the most evil character in Ace Combat series</em>. I think it&#39;s only natural that I wanted to put <strong>Torres</strong> into <strong><span style="color: red">Mor</span>gan</strong> and make something like this. I <em>imagined</em> his voicelines to fit the game rather well, and was pleased to see them actually do so. Since we&#39;re merging elements of <strong>Ace Combat 7</strong> into <strong>Ace Combat Zero</strong>, I also decided to bring <a href="https://www.youtube.com/watch?v=_1Vb-ymHFPg">some music from there</a> which also ended up well and doesn&#39;t make the original battle less engaging.</p>
<p>But it wasn&#39;t as easy as you might think, so I decided to do this write-up.</p>
<p><div class="image"><div class="image__container"><a href="./Matias_Torres_AC7_Image.jpg" target="_blank" rel="noopener"><img title="Picture it! The most evil character of Ace Combat" src="./Matias_Torres_AC7_Image.jpg" /></a><h4 class="image__title">Picture it! The most evil character of Ace Combat</h4></div></div></p>
<h2 id="mixing-nightmare"><strong>Mixing nightmare</strong><a href="#mixing-nightmare" class="anchor-link"><span>¶</span></a></h2><p><em>You see, making funny videos is about working with source material</em>, but in this case I didn&#39;t want to waste time ripping all the available voice files and also looking for required ones among them. The most dumb straightforward <strong>way of ripping</strong> was chosen - <strong>directly from audio/video</strong>.</p>
<p>This is something I could easily do with music back in the days when I didn&#39;t have good internet to find ripped music from some favorite niche game, I guess it can still happen today if nobody has ripped it before.</p>
<p>The way it&#39;s done is usually easy - you turn down the volume for everything but the sounds you need, in case of <strong>Ace Combat footage</strong> we need:</p>
<ul>
<li>Audio/video of gameplay</li>
<li>AWACS&#39; voicelines</li>
<li>Torres&#39; voicelines</li>
</ul>
<p>Once again, getting all these wasn&#39;t easy as you may think.</p>
<h2 id="getting-rid-of-zero"><strong>Getting rid of Zero</strong><a href="#getting-rid-of-zero" class="anchor-link"><span>¶</span></a></h2><p><strong>The first problem</strong> is the <strong>BGM Volume</strong> setting. You&#39;d expect that lowering it would get rid of all music, <strong>but it also removes all sounds from cutscenes</strong>, there&#39;s a warning message in sound menu that implied this.</p>
<p><em>I had to find a way to prevent music from playing even with <strong>BGM volume</strong> at 12.</em></p>
<p>Despite volume being applied like that, I was pretty sure that audio track and sound/voice tracks are separate, because it&#39;s clear there are no cuts in the music when cutscene starts.</p>
<p>With <strong>Cheat Engine</strong> ready, my first thought was to find a value with current music position, maybe it was increasing along with all timers and freezing it would magically pause the music, but I only found generic timers including the in-game one at upper right corner. Only after this failure I had a second thought that music stream wouldn&#39;t be dependant on position value, the latter being just something you&#39;d only observe, not modify.</p>
<p>Shortly after I noticed that <strong>music doesn&#39;t immediately kick in</strong>, which led me to assume that there must be some timer that may activate the music after it goes past certain value. By resetting the level and freezing portions of possibly related values I did manage to find a particular one that stopped <strong>Zero</strong> for good</p>
<p><em><strong>but only for the phase one</strong></em></p>
<p>After the first cutscene ends, the music comes back, the previously freezed timer doesn&#39;t do anything here.</p>
<p>I had several thoughts on why it&#39;d be like that:</p>
<ul>
<li>There&#39;s a similar but different instance of timer for this case - but either I didn&#39;t find it, or the delay is so small that freezing the timer doesn&#39;t really help.</li>
<li>The game is programmed in a way that it explicitly starts the music after cutscene ends, meaning there&#39;s no value to freeze like before.</li>
<li>The game is programmed in a way I don&#39;t have a clue about, only reverse engineering would help.</li>
</ul>
<p>Since music starts immediately there was no point in trying to find some kind of timer, and yet I didn&#39;t want to waste my own time by trying to literally replace the music with a blank or maybe prevent some kind of MusicStreamStart function from running.</p>
<p><em>The solution I&#39;ve got came by pure accident.</em></p>
<p><strong>It&#39;s often useful to see the memory changes around whatever you already found.</strong> In this case, I observed what was being changed between a cutscene and gameplay, cherry-picked the changed memory portions and tried to freeze or tamper with them.</p>
<p><strong>One particular value</strong>, which I have no idea what actually does, <strong>allowed me to skip the entire second phase of battle</strong>. In the video below, I freeze said magic value during the cutscene and skip it to get back to gameplay, only to be taken back to the same exact cutscene I tried to skip, at this point I unfreeze the value and try to skip the cutscene again, which has the exact same issue but now we&#39;re taken back to ending cutscene.</p>
<p>The video below also has bonus portion where I try to set garbage value, which results in weird behaviour: control is taken from the player and there&#39;s a bunch of friendly blimps on the radar.</p>
<iframe width="768" height="432" src="https://www.youtube.com/embed/z961NbRDK_Y" title="Weird cutscene skip" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>If we skip the battle like this, original music doesn&#39;t have enough time to fully kick in, meaning we don&#39;t really hear it. <strong>Problem solved by accident.</strong></p>
<p>I still want to believe there&#39;s some variable that controls the music volume in these cutscenes, because during the last cutscene - music fades out and there are no cuts.</p>
<h2 id="minor-issues"><strong>Minor issues</strong><a href="#minor-issues" class="anchor-link"><span>¶</span></a></h2><p><strong>The second problem</strong> is the fact that even if we get rid of music in cutscenes - <strong>there are still baked Pixy&#39;s voicelines that overlap with sounds</strong>. This led me to <strong>stretching the background noise and cutting a portion of Pixy flying</strong> (I didn&#39;t have meaningful Torres&#39; voicelines for this anyway), it&#39;s not really noticeable due to other sounds and you not having the original cutscene alongside.</p>
<p><strong>Third problem</strong> are Torres&#39; voicelines. <a href="https://www.youtube.com/watch?v=_0K6_3DH1pQ&t=2100s">Original voiceline files</a> don&#39;t have radio filter applied on them, and I didn&#39;t want to imitate one by myself. So I decided to get these in a similar manner as with <strong>Ace Combat Zero</strong> - by playing the game only with voices on and recording them. The actual problem here is that <strong>required voicelines can overlap with the others</strong>, like in case of Torres&#39; excuse for his batshit insane plan - this can be overlapped by voicelines from other pilots around you. <strong>I managed to get a clear recording of Torres by avoiding interacting with other pilots or mission objectives.</strong> To get all voicelines I wanted, I had to do several takes in which different voicelines were overlapped, by splicing these takes I could piece together the original speech.</p>
<h2 id="iff"><strong>IFF</strong><a href="#iff" class="anchor-link"><span>¶</span></a></h2><p>Here&#39;s something you can easily do with <strong>Cheat Engine</strong> to make funny pictures. Search <strong>Pixy</strong> as a string and you&#39;ll get plenty of them, now you can literally change these to whatever meaningful text you want. It&#39;s very simple to do, but let&#39;s admit that without this the video wouldn&#39;t be as funny or immersive.</p>
<p><div class="image"><div class="image__container"><a href="./torres_iff.jpg" target="_blank" rel="noopener"><img title="Give Aces the names of your friends to shoot them down when angry" src="./torres_iff.jpg" /></a><h4 class="image__title">Give Aces the names of your friends to shoot them down when angry</h4></div></div></p>
<p><div class="image"><div class="image__container"><a href="./shrek.jpg" target="_blank" rel="noopener"><img title="All names of Aces are just stored in memory, above all PIXY there were some WIZARD and GAULT" src="./shrek.jpg" /></a><h4 class="image__title">All names of Aces are just stored in memory, above all PIXY there were some WIZARD and GAULT</h4></div></div></p>
<h2 id="splash-screen"><strong>Splash screen</strong><a href="#splash-screen" class="anchor-link"><span>¶</span></a></h2><p>The splash screens for missions are apparently just pictures, because you can&#39;t rename it&#39;s contents like you could with Pixy, meaning I had to edit the image.</p>
<p><strong>The resulting splash screen is quite simple but satisfying photoshop.</strong> My first step was to take a portion from any original splash and put it into <a href="https://www.myfonts.com/WhatTheFont/">WhatTheFont</a>, which can recognize fonts from images - this gave me a hint on which fonts I could use. After finding a font that suits and adjusting it&#39;s size, spacing and color, it still didn&#39;t look good at all until I applied blur effect. The picture below says it all.</p>
<p>If one were to nitpick, you can notice very slight gradient on the original text from left to right. I decided not to worry about it because most people won&#39;t notice.</p>
<p><div class="image"><div class="image__container"><a href="./splash.gif" target="_blank" rel="noopener"><img title="The drastic difference that blur brings" src="./splash.gif" /></a><h4 class="image__title">The drastic difference that blur brings</h4></div></div></p>
<h2 id="subtitles"><strong>Subtitles?</strong><a href="#subtitles" class="anchor-link"><span>¶</span></a></h2><p>The subtitles of <strong>Ace Combat</strong> are quite iconic, but I decided against them so they wouldn&#39;t distract from action too much. And yet without any pictures I want to mention on how I tried to approach them if they were done.</p>
<p>There&#39;s a very good subtitle editor called <a href="http://www.aegisub.org/"><strong>Aegisub</strong></a> which allows to do these rapidly, and I mean it. Compared to popular video editors: either I don&#39;t know how to do it, or doing subtitles in them would be really tiresome and also prone to styling errors. In <strong>Aegisub</strong> you can focus on actual text and style it with presets. I&#39;d do a preset for <strong>AWACS&#39;</strong> and <strong>Torres&#39;</strong> voicelines, and also a preset for cutscene subtitles. You can then export subtitles in most of the popular formats.</p>
<p>The problem is that importing subtitles, especially if they&#39;re styled, in video editor of your choice might be troublesome, but I&#39;d ignore that by rather taking <strong>ffmpeg</strong> and <a href="https://trac.ffmpeg.org/wiki/HowToBurnSubtitlesIntoVideo">hard baking subtitles in the video</a>. Make sure you also google on how to preserve audio and not lose any video quality you already had, as this requires to re-encode the original video.</p>
<h2 id="piecing-it-all-together"><strong>Piecing it all together</strong><a href="#piecing-it-all-together" class="anchor-link"><span>¶</span></a></h2><p>With all source material ready, it&#39;s only a matter of cutting and moving things around, but there are still several issues that could be addressed:</p>
<ul>
<li>Bad gradient issue on skies - this is due to not having enough colors, either we need more of them or noise has to be applied. Unfortunately applied noise would be really noticeable, maybe it could be fixed with emulator settings?</li>
<li>Bad squarish border that covers mini-nuke explosions, obviously blame the emulator.</li>
<li>I didn&#39;t record in <strong>1080p</strong> with higher bitrate because I was lazy to change my settings.</li>
<li>Little stuttering here and there.</li>
<li>Would like to get rid of final cutscene music so <strong>Ace Combat 7</strong> music would be here instead.</li>
<li>I was impatient and didn&#39;t wait for final <strong>Ace Combat 7 DLC</strong> mission to release so we could get more Torres&#39; voicelines.</li>
<li>Using original Torres&#39; voicelines? We still need all of them extracted and a proper filter to achieve radio effect.</li>
</ul>
<p>While this small project is not really complex, at least it&#39;s something I finally had some passion to work on after several months. Doing this write-up is no exception, as I didn&#39;t write anything since the last summer.<br/> I think by reading this, some people could get a thing or two they could find useful for their own projects, <em>tell me if you do!</em></p>
<p><div class="image"><div class="image__container"><a href="./premier.png" target="_blank" rel="noopener"><img title="Here&apos;s the end result" src="./premier.png" /></a><h4 class="image__title">Here&apos;s the end result</h4></div></div></p>
<iframe width="768" height="432" src="https://www.youtube.com/embed/l4ORTB0yEUU" title="Ace Combat Zero but it's Solo Sheet Torres" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></main>
    
  </body>
</html>